<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta content='width=device-width, initial-scale=1' name='viewport'/>
    <title>Panel de Seguridad - Stark Industries</title>
    <link rel="icon" type="image/png" href="/images/icon.png" th:href="@{/images/icon.png}">
    <link rel="shortcut icon" href="/images/icon.png" th:href="@{/images/icon.png}">
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
<header>
    <div class="header-left">
        <img src="/images/StarkIndustries_ImagenTitulo.jpg" th:src="@{/images/StarkIndustries_ImagenTitulo.jpg}" alt="Stark Industries" class="logo">
        <h1>Stark Industries - Sistema de Seguridad Concurrente</h1>
    </div>
    <div>
        <span id="user-info" class="user-role">Usuario: cargando...</span>
        <a href="/logout"><button id="logout-btn" class="logout-btn">Cerrar sesiÃ³n</button></a>
    </div>
</header>

<main>
    <section id="contador-alertas">
        <h2>Contadores de Eventos</h2>
        <div id="alert-counts">
            <div class="alert-box" id="movimiento-alerts">
                Alertas Movimiento: <span id="movimiento-count">0</span>
            </div>
            <div class="alert-box" id="temperatura-alerts">
                Alertas Temperatura: <span id="temperatura-count">0</span>
            </div>
            <div class="alert-box" id="acceso-alerts">
                Alertas Acceso: <span id="acceso-count">0</span>
            </div>
            <div class="alert-box" id="average-temperature">
                Temperatura media: <span id="average-temp">0.00Â°C</span>
            </div>
        </div>
    </section>

    <section id="alertas">
        <h2>Alertas en Tiempo Real</h2>
        <div id="alert-container"></div>
    </section>

    <section id="monitoreo">
        <h2>Monitoreo de Sensores</h2>

        <!-- Selector de sensor -->
        <div class="sensor-selector">
            <button id="toggleSelector">Seleccionar sensor â–¾</button>
            <div id="sensorDropdown" class="dropdown hidden">
                <button class="sensor-option" data-sensor="movimiento">Sensor de Movimiento</button>
                <button class="sensor-option" data-sensor="temperatura">Sensor de Temperatura</button>
                <button class="sensor-option" data-sensor="acceso">Sensor de Acceso</button>
            </div>
        </div>

        <!-- Controles -->
        <div class="sensor-controls">
            <button id="pause-btn" class="control-btn">â¸</button>
            <button id="reset-btn" class="control-btn">ğŸ”„</button>
        </div>

        <!-- Contenedor dinÃ¡mico del grÃ¡fico -->
        <div class="charts">
            <canvas id="chartMovimiento" class="sensor-chart"></canvas>
            <canvas id="chartTemperatura" class="sensor-chart hidden"></canvas>
            <canvas id="chartAcceso" class="sensor-chart hidden"></canvas>
        </div>
    </section>

    <section id="eventos">
        <h2>Eventos Recientes</h2>
        <table>
            <thead>
            <tr><th>Hora</th><th>Sensor</th><th>Valor</th><th>CrÃ­tico</th></tr>
            </thead>
            <tbody id="tabla-eventos"></tbody>
        </table>
    </section>
</main>

<footer>
    <p>Â© 2025 Stark Industries. Sistema de Seguridad Concurrente desarrollado con Spring Boot.</p>
</footer>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<!-- Agregados SockJS y Stomp para la comunicaciÃ³n WebSocket/STOMP -->
<script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>
<script src="/js/app.js"></script>
</body>
</html>
